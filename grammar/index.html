<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Speaking Class: About Yourself & Family</title>
    <style>
        :root {
            --tdv-red: #E30613;
            --tdv-blue: #005796;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
            --accent-green: #28a745;
            --accent-orange: #fd7e14;
        }

        /* --- TEMEL AYARLAR & iOS RESET --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            /* iOS Alt gÃ¼venli alan (iPhone X ve sonrasÄ± iÃ§in) */
            padding-bottom: calc(80px + env(safe-area-inset-bottom)); 
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            touch-action: manipulation; /* Ã‡ift tÄ±klama zoom'unu engeller */
        }

        /* --- HEADER --- */
        header {
            background: linear-gradient(135deg, var(--tdv-red), var(--tdv-blue));
            color: white;
            padding: 15px 20px;
            /* iOS Ãœst Ã§entik alanÄ± iÃ§in padding */
            padding-top: max(15px, env(safe-area-inset-top));
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky; /* Mobilde Ã¼stte kalsÄ±n */
            top: 0;
            z-index: 100;
        }

        .header-logo {
            height: 60px;
            width: auto;
            background: white;
            padding: 4px;
            border-radius: 8px;
            min-width: 60px;
        }

        .header-content {
            text-align: center;
            flex-grow: 1;
            padding: 0 10px;
        }

        h1, h2, h3 { margin: 0; }
        header h1 { font-size: 1.4rem; margin-bottom: 4px; line-height: 1.2; }
        header h2 { font-size: 0.9rem; font-weight: 300; opacity: 0.95; }
        .sub-text { font-size: 0.75rem; margin-top: 3px; opacity: 0.8; }

        /* --- FLOATING LANGUAGE BUTTON --- */
        .lang-toggle {
            position: fixed;
            /* iOS alt bar'Ä±n Ã¼stÃ¼nde kalmasÄ± iÃ§in gÃ¼venli alan hesabÄ± */
            bottom: calc(20px + env(safe-area-inset-bottom));
            right: 20px;
            background: var(--tdv-blue);
            color: white;
            border: 2px solid white;
            padding: 14px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            z-index: 9999;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: transform 0.2s, background 0.2s;
            /* Mobilde yanlÄ±ÅŸlÄ±kla seÃ§ilmeyi engelle */
            -webkit-user-select: none;
            user-select: none;
            /* Dokunma alanÄ± iyileÅŸtirmesi */
            min-width: 120px;
            text-align: center;
        }
        .lang-toggle:active {
            transform: scale(0.95);
            background: var(--tdv-red);
        }

        /* --- LAYOUT --- */
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px; /* Daha yuvarlak kÃ¶ÅŸeler modern iOS hissi verir */
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border-left: 5px solid var(--tdv-red);
        }

        .card h3 {
            color: var(--tdv-blue);
            border-bottom: 1px solid #eee;
            padding-bottom: 12px;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* --- INTERACTIVE TEXT --- */
        .click-word {
            cursor: pointer;
            border-bottom: 1px dotted #ccc; 
            transition: background 0.1s;
            margin: 0 1px;
            padding: 2px 0; /* Parmakla basmayÄ± kolaylaÅŸtÄ±rÄ±r */
        }
        .click-word:active, .click-word:hover {
            background-color: #ffeeba;
            color: #000;
            border-radius: 4px;
        }
        
        /* Tooltip */
        #tooltip {
            position: absolute;
            background: rgba(30, 30, 30, 0.95); /* Hafif transparan modern gÃ¶rÃ¼nÃ¼m */
            color: #fff;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 16px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10000;
            white-space: nowrap;
            transform: translate(-50%, -140%); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            font-weight: 500;
            backdrop-filter: blur(4px); /* iOS tarzÄ± blur */
        }
        #tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: rgba(30, 30, 30, 0.95) transparent transparent transparent;
        }

        /* --- COMPONENTS --- */
        button { font-family: inherit; }
        
        /* Mood Buttons */
        .mood-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        .mood-btn {
            font-size: 2.5rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.2s;
            padding: 10px;
        }
        .mood-btn:active { transform: scale(1.2); }

        /* Roulette */
        .roulette-box {
            text-align: center;
            background: #fafafa;
            border: 2px dashed #e0e0e0;
            padding: 25px 15px;
            border-radius: 12px;
        }
        #q-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--tdv-red);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            line-height: 1.4;
            flex-wrap: wrap; 
        }
        .btn-main {
            background: var(--tdv-red);
            color: white;
            border: none;
            padding: 16px 32px; /* Daha bÃ¼yÃ¼k buton */
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(227, 6, 19, 0.3);
            font-weight: 600;
            width: 100%; /* Mobilde tam geniÅŸlik */
            max-width: 300px;
        }
        .btn-main:active { transform: scale(0.98); box-shadow: none; }

        /* Timer */
        .timer-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 3.5rem;
            font-weight: 700;
            background: #222;
            color: #0f0;
            display: inline-block;
            padding: 15px 30px;
            border-radius: 12px;
            margin: 15px 0;
            letter-spacing: 2px;
        }
        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .timer-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            flex: 1;
            min-width: 80px;
            max-width: 120px;
        }
        .bg-green { background-color: var(--accent-green); }
        .bg-red { background-color: var(--tdv-red); }
        .bg-blue { background-color: var(--tdv-blue); }

        /* Game */
        .scramble-text {
            font-size: 2.2rem;
            letter-spacing: 6px;
            font-weight: 800;
            color: var(--accent-orange);
            margin: 20px 0;
            word-break: break-all;
        }
        .input-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .game-input, #vocab-input {
            padding: 12px 15px;
            font-size: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            flex: 1;
            min-width: 200px; /* Mobilde Ã§ok kÃ¼Ã§Ã¼lmesin */
            -webkit-appearance: none; /* iOS input stilini temizle */
        }
        .game-input:focus, #vocab-input:focus {
            border-color: var(--tdv-blue);
            outline: none;
        }

        /* Vocab List */
        #vocab-list {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        #vocab-list li {
            background: #e3f2fd;
            color: var(--tdv-blue);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        footer {
            text-align: center;
            color: #888;
            font-size: 0.85rem;
            margin-top: 30px;
            padding-bottom: 20px;
        }

        /* --- MOBILE OPTIMIZATIONS (Responsive) --- */
        @media (max-width: 600px) {
            header {
                padding: 10px 15px;
                /* Mobilde header'Ä± sÄ±kÄ±ÅŸtÄ±r */
            }
            .header-logo {
                display: none; /* Mobilde logolarÄ± gizle, alan kazandÄ±r */
            }
            header h1 { font-size: 1.3rem; }
            
            .card {
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 12px;
            }
            
            .timer-display {
                font-size: 2.8rem;
                padding: 10px 20px;
            }
            
            .timer-controls {
                gap: 8px;
            }
            .timer-btn {
                padding: 12px;
                font-size: 0.95rem;
            }

            .lang-toggle {
                padding: 12px 16px;
                font-size: 0.9rem;
                right: 15px;
            }
        }
    </style>
</head>
<body>

<div id="tooltip"></div>

<button class="lang-toggle" onclick="toggleLang()">ğŸ‡¹ğŸ‡· TR / ğŸ‡¬ğŸ‡§ EN</button>

<header>
    <img src="linguamis-logo.png" alt="Logo" class="header-logo" onerror="this.style.display='none'">
    <div class="header-content">
        <h1 id="txt-header">About Yourself & Family</h1>
        <h2 id="txt-teacher">Teacher: Musab Ä°kbal SUBAÅI</h2>
        <div class="sub-text">TDV English Speaking Class</div>
    </div>
    <img src="diyanet-logo.png" alt="Logo" class="header-logo" onerror="this.style.display='none'">
</header>

<div class="container">

    <div class="card">
        <h3 id="txt-rules-title">ğŸ“¢ Class Rules</h3>
        <div id="txt-rules-list"></div>
    </div>

    <div class="card" style="text-align:center;">
        <h3 id="txt-warmup-title">ğŸŒ¤ï¸ Warm-Up</h3>
        <p id="txt-warmup-q" style="font-size:1.2rem;">How are you feeling today?</p>
        <div class="mood-container">
            <button class="mood-btn" onclick="showMood('happy')">ğŸ˜Š</button>
            <button class="mood-btn" onclick="showMood('sad')">â˜¹ï¸</button>
            <button class="mood-btn" onclick="showMood('sleepy')">ğŸ˜´</button>
        </div>
        <div id="mood-msg" style="margin-top:10px; font-weight:bold; min-height:24px;"></div>
    </div>

    <div class="card">
        <h3 id="txt-profile-title">ğŸ‘¨â€ğŸ« Teacher Profile</h3>
        <div id="profile-content"></div>
    </div>

    <div class="card roulette-box">
        <h3 id="txt-roulette-title">ğŸ™ï¸ Speaking Roulette</h3>
        <p id="txt-roulette-desc" style="margin-bottom:15px; opacity:0.7;">Click button for a question</p>
        
        <div id="q-display">Ready?</div>
        
        <button class="btn-main" onclick="spinRoulette()" id="btn-spin">ğŸ° SPIN WHEEL</button>
    </div>

    <div class="card" style="text-align:center;">
        <h3 id="txt-timer-title">â±ï¸ Speaking Timer</h3>
        <div class="timer-display" id="timer-val">00:00</div>
        <div class="timer-controls">
            <button class="timer-btn bg-green" onclick="startTimer()">Start</button>
            <button class="timer-btn bg-red" onclick="stopTimer()">Stop</button>
            <button class="timer-btn bg-blue" onclick="resetTimer()">Reset</button>
        </div>
    </div>

    <div class="card" style="text-align:center;">
        <h3 id="txt-game-title">ğŸ§© Word Scramble</h3>
        <p id="txt-game-desc" style="opacity:0.7;">Unscramble the family word!</p>
        
        <div class="scramble-text" id="game-word">FAMILY</div>
        
        <div class="input-group">
            <input type="text" id="game-input" class="game-input" placeholder="...">
            <button class="timer-btn bg-blue" onclick="checkGame()" style="flex:0; min-width:80px;">Check</button>
        </div>
        
        <div id="game-msg" style="margin-top:15px; height:20px; font-weight:bold;"></div>
        <button onclick="nextGameWord()" style="margin-top:15px; background:none; border:none; text-decoration:underline; cursor:pointer; color:#777; font-size:1rem; padding:10px;">Next Word &rarr;</button>
    </div>

    <div class="card">
        <h3 id="txt-vocab-title">ğŸ“ Vocabulary</h3>
        <div class="input-group">
            <input type="text" id="vocab-input" placeholder="New word...">
            <button class="timer-btn bg-blue" onclick="addVocab()" style="flex:0; min-width:80px;">Add</button>
        </div>
        <ul id="vocab-list"></ul>
    </div>

</div>

<footer>
    <p>LINGUAMIS.COM - TÃœRKÄ°YE DÄ°YANET VAKFI</p>
</footer>

<script>
    // --- 1. SÃ–ZLÃœK ---
    const dictionary = {
        "about": "hakkÄ±nda", "yourself": "kendin", "family": "aile", "rules": "kurallar",
        "class": "sÄ±nÄ±f", "teacher": "Ã¶ÄŸretmen", "name": "isim", "how": "nasÄ±l",
        "are": "sin/sun", "you": "sen", "feeling": "hissetmek", "today": "bugÃ¼n",
        "happy": "mutlu", "sad": "Ã¼zgÃ¼n", "sleepy": "uykulu", "profile": "profil",
        "student": "Ã¶ÄŸrenci", "experience": "tecrÃ¼be", "hobbies": "hobiler", "chess": "satranÃ§",
        "soccer": "futbol", "speaking": "konuÅŸma", "roulette": "rulet", "click": "tÄ±kla",
        "question": "soru", "spin": "Ã§evir", "wheel": "Ã§ark", "timer": "zamanlayÄ±cÄ±",
        "start": "baÅŸla", "stop": "dur", "reset": "sÄ±fÄ±rla", "word": "kelime",
        "scramble": "karÄ±ÅŸÄ±k", "unscramble": "Ã§Ã¶zmek", "check": "kontrol", "vocabulary": "kelime hazinesi",
        "add": "ekle", "father": "baba", "mother": "anne", "brother": "erkek kardeÅŸ",
        "sister": "kÄ±z kardeÅŸ", "uncle": "amca/dayÄ±", "aunt": "hala/teyze", "cousin": "kuzen",
        "grandfather": "bÃ¼yÃ¼kbaba", "grandmother": "bÃ¼yÃ¼kanne", "job": "meslek",
        "where": "nerede", "from": "den/dan", "mornings": "sabahlarÄ±", "weekends": "hafta sonlarÄ±",
        "favorite": "favori", "activity": "aktivite", "ready": "hazÄ±r", "what": "ne",
        "is": "dir/dÄ±r", "do": "yapmak", "tell": "anlat/sÃ¶yle", "me": "bana",
        "have": "sahip olmak", "best": "en iyi", "friend": "arkadaÅŸ", "person": "kiÅŸi",
        "why": "neden", "parents": "ebeveynler", "like": "sevmek/gibi", "doing": "yapmak",
        "things": "ÅŸeyler", "time": "zaman", "be": "olmak", "punctual": "dakik",
        "participate": "katÄ±lmak", "raise": "kaldÄ±rmak", "hand": "el", "tools": "araÃ§lar",
        "use": "kullanmak", "dictionary": "sÃ¶zlÃ¼k", "just": "sadece", "speak": "konuÅŸ",
        "dont": "yapma", "fear": "korkmak", "grammar": "dilbilgisi", "grade": "sÄ±nÄ±f/derece",
        "game": "oyun", "list": "liste", "new": "yeni", "great": "harika", "keep": "devam et",
        "smiling": "gÃ¼lÃ¼msemek", "worry": "endiÅŸelenmek", "wake": "uyan", "up": "yukarÄ±",
        "english": "ingilizce", "level": "seviye", "beginner": "baÅŸlangÄ±Ã§", "study": "okumak/bÃ¶lÃ¼m",
        "visit": "ziyaret etmek", "often": "sÄ±k sÄ±k", "old": "yaÅŸlÄ±/eski", "who": "kim"
    };

    let currentLang = 'en';

    // --- 2. Ä°Ã‡ERÄ°K ---
    const content = {
        en: {
            header: "About Yourself & Family",
            teacher: "Teacher: Musab Ä°kbal SUBAÅI",
            rulesTitle: "ğŸ“¢ Class Rules",
            rulesList: [
                "â° <b>Time:</b> Be punctual.",
                "âœ‹ <b>Participate:</b> Raise hand.",
                "ğŸ“– <b>Tools:</b> Use dictionary.",
                "ğŸ’ª <b>Just Speak!</b> Don't fear grammar."
            ],
            warmupTitle: "ğŸŒ¤ï¸ Warm-Up",
            warmupQ: "How are you feeling today?",
            profileTitle: "ğŸ‘¨â€ğŸ« Teacher Profile",
            profileData: [
                "<b>Name:</b> Ä°kbal",
                "<b>Study:</b> ELT Student (4th Grade) ğŸ“",
                "<b>Hobbies:</b> Chess & Soccer âš½"
            ],
            rouletteTitle: "ğŸ™ï¸ Speaking Roulette",
            rouletteDesc: "Click button for a question",
            spinBtn: "ğŸ° SPIN WHEEL",
            qDefault: "Ready?",
            questions: [
                "What is your name?",
                "Where are you from?",
                "What do you do in mornings?",
                "Tell me about your father.",
                "Do you have brothers or sisters?",
                "What is your favorite hobby?",
                "Who is your best friend?",
                "What do you like doing?"
            ],
            timerTitle: "â±ï¸ Speaking Timer",
            gameTitle: "ğŸ§© Word Scramble",
            gameDesc: "Unscramble the family word!",
            vocabTitle: "ğŸ“ Vocabulary"
        },
        tr: {
            header: "Kendin ve Ailen",
            teacher: "Ã–ÄŸretmen: Musab Ä°kbal SUBAÅI",
            rulesTitle: "ğŸ“¢ SÄ±nÄ±f KurallarÄ±",
            rulesList: [
                "â° <b>Zaman:</b> Dakik ol.",
                "âœ‹ <b>KatÄ±lÄ±m:</b> Parmak kaldÄ±r.",
                "ğŸ“– <b>AraÃ§lar:</b> SÃ¶zlÃ¼k kullan.",
                "ğŸ’ª <b>KonuÅŸ!</b> Hata yapmaktan korkma."
            ],
            warmupTitle: "ğŸŒ¤ï¸ IsÄ±nma",
            warmupQ: "BugÃ¼n nasÄ±l hissediyorsun?",
            profileTitle: "ğŸ‘¨â€ğŸ« Ã–ÄŸretmen Profili",
            profileData: [
                "<b>Ä°sim:</b> Ä°kbal",
                "<b>BÃ¶lÃ¼m:</b> Ä°ngilizce Ã–ÄŸrt. (4. SÄ±nÄ±f) ğŸ“",
                "<b>Hobiler:</b> SatranÃ§ & Futbol âš½"
            ],
            rouletteTitle: "ğŸ™ï¸ KonuÅŸma Ruleti",
            rouletteDesc: "Soru iÃ§in butona tÄ±kla",
            spinBtn: "ğŸ° Ã‡ARKI Ã‡EVÄ°R",
            qDefault: "HazÄ±r mÄ±sÄ±n?",
            questions: [
                "AdÄ±n ne?",
                "Nerelisin?",
                "SabahlarÄ± ne yaparsÄ±n?",
                "Baban hakkÄ±nda bilgi ver.",
                "KardeÅŸin var mÄ±?",
                "En sevdiÄŸin hobi nedir?",
                "En yakÄ±n arkadaÅŸÄ±n kim?",
                "Ne yapmayÄ± seversin?"
            ],
            timerTitle: "â±ï¸ KonuÅŸma SayacÄ±",
            gameTitle: "ğŸ§© Kelime AvÄ±",
            gameDesc: "KarÄ±ÅŸÄ±k harfleri dÃ¼zenle!",
            vocabTitle: "ğŸ“ Kelime Listesi"
        }
    };

    // --- 3. METÄ°N Ä°ÅLEME (BoÅŸluk Koruma) ---
    function renderPage() {
        const t = content[currentLang];

        setText("txt-header", t.header);
        setText("txt-teacher", t.teacher);
        setText("txt-rules-title", t.rulesTitle);
        setText("txt-warmup-title", t.warmupTitle);
        setText("txt-warmup-q", t.warmupQ);
        setText("txt-profile-title", t.profileTitle);
        setText("txt-roulette-title", t.rouletteTitle);
        setText("txt-roulette-desc", t.rouletteDesc);
        document.getElementById("btn-spin").innerText = t.spinBtn;
        setText("q-display", t.qDefault);
        setText("txt-timer-title", t.timerTitle);
        setText("txt-game-title", t.gameTitle);
        setText("txt-game-desc", t.gameDesc);
        setText("txt-vocab-title", t.vocabTitle);

        const rulesBox = document.getElementById("txt-rules-list");
        rulesBox.innerHTML = "";
        t.rulesList.forEach(item => {
            const p = document.createElement("p");
            p.innerHTML = processClickableText(item); 
            rulesBox.appendChild(p);
        });

        const profileBox = document.getElementById("profile-content");
        profileBox.innerHTML = "";
        t.profileData.forEach(item => {
            const div = document.createElement("div");
            div.className = "profile-row";
            div.innerHTML = processClickableText(item);
            profileBox.appendChild(div);
        });
    }

    function setText(id, text) {
        const el = document.getElementById(id);
        if (el) el.innerHTML = processClickableText(text);
    }

    function processClickableText(text) {
        if (currentLang === 'tr') return text; 
        const words = text.split(' ');
        const processedWords = words.map(word => {
            if(word.trim() === '') return '';
            if (word.includes('<') || word.includes('>')) return word;
            const raw = word.replace(/[.,?!:;()"]/g, "").toLowerCase();
            return `<span class="click-word" onclick="showTip(event, '${raw}')">${word}</span>`;
        });
        return processedWords.join(' '); 
    }

    function toggleLang() {
        currentLang = (currentLang === 'en') ? 'tr' : 'en';
        renderPage();
    }

    // --- 4. TOOLTIP ---
    const tooltip = document.getElementById("tooltip");
    
    function showTip(e, word) {
        e.stopPropagation();
        let meaning = dictionary[word];
        if (!meaning) meaning = "Ã‡eviri bulunamadÄ±"; 
        
        tooltip.innerText = meaning;
        tooltip.style.opacity = "1";
        
        // KonumlandÄ±rma - Mobilde taÅŸmamasÄ± iÃ§in kontrol
        const rect = e.target.getBoundingClientRect();
        const tooltipWidth = tooltip.offsetWidth;
        const screenWidth = window.innerWidth;
        
        let left = rect.left + (rect.width/2);
        
        // Ekrandan taÅŸarsa dÃ¼zelt
        if (left < (tooltipWidth/2)) left = tooltipWidth/2 + 10;
        if (left > (screenWidth - tooltipWidth/2)) left = screenWidth - tooltipWidth/2 - 10;

        tooltip.style.top = (rect.top + window.scrollY - 10) + "px";
        tooltip.style.left = left + "px";

        setTimeout(() => { tooltip.style.opacity = "0"; }, 2000);
    }

    // --- 5. Ä°ÅLEVLER ---
    function showMood(mood) {
        const msg = document.getElementById("mood-msg");
        if(mood === 'happy') msg.innerHTML = "<span style='color:green'>Great! Keep smiling! ğŸŒŸ</span>";
        else if(mood === 'sad') msg.innerHTML = "<span style='color:red'>Don't worry, be happy! ğŸ«</span>";
        else msg.innerHTML = "<span style='color:blue'>Wake up! Time to speak! â˜•</span>";
        if(currentLang === 'en') msg.innerHTML = processClickableText(msg.innerHTML);
    }

    function spinRoulette() {
        const display = document.getElementById("q-display");
        const btn = document.getElementById("btn-spin");
        const list = content[currentLang].questions;

        btn.disabled = true;
        btn.style.opacity = 0.5;
        let count = 0;
        const interval = setInterval(() => {
            display.innerText = list[Math.floor(Math.random() * list.length)];
            count++;
            if(count > 15) {
                clearInterval(interval);
                btn.disabled = false;
                btn.style.opacity = 1;
                if(currentLang === 'en') display.innerHTML = processClickableText(display.innerText);
            }
        }, 100);
    }

    // Timer
    let timerInt = null;
    let seconds = 0;
    function updateTimer() {
        const m = Math.floor(seconds / 60).toString().padStart(2, '0');
        const s = (seconds % 60).toString().padStart(2, '0');
        document.getElementById("timer-val").innerText = `${m}:${s}`;
    }
    function startTimer() { if(!timerInt) timerInt = setInterval(() => { seconds++; updateTimer(); }, 1000); }
    function stopTimer() { clearInterval(timerInt); timerInt = null; }
    function resetTimer() { stopTimer(); seconds = 0; updateTimer(); }

    // Game
    const gameWords = ["FAMILY", "MOTHER", "FATHER", "SISTER", "BROTHER", "UNCLE", "COUSIN", "AUNT"];
    let currentWord = "";
    function shuffle(s) { return s.split('').sort(() => 0.5 - Math.random()).join(''); }
    function nextGameWord() {
        currentWord = gameWords[Math.floor(Math.random() * gameWords.length)];
        document.getElementById("game-word").innerText = shuffle(currentWord);
        document.getElementById("game-input").value = "";
        document.getElementById("game-msg").innerText = "";
        document.getElementById("game-input").style.borderColor = "#e0e0e0";
    }
    function checkGame() {
        const userVal = document.getElementById("game-input").value.toUpperCase().trim();
        const msg = document.getElementById("game-msg");
        if(userVal === currentWord) {
            msg.innerHTML = "<span style='color:green'>âœ… CORRECT!</span>";
            document.getElementById("game-input").style.borderColor = "green";
        } else {
            msg.innerHTML = "<span style='color:red'>âŒ Try Again</span>";
            document.getElementById("game-input").style.borderColor = "red";
        }
    }

    // Vocab
    function addVocab() {
        const input = document.getElementById("vocab-input");
        const val = input.value.trim();
        if(val) {
            const li = document.createElement("li");
            li.innerText = val;
            document.getElementById("vocab-list").appendChild(li);
            input.value = "";
        }
    }

    // Init
    renderPage();
    nextGameWord();

    document.body.addEventListener('click', () => { tooltip.style.opacity = "0"; });

</script>
</body>
</html>
